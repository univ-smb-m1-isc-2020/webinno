<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: head"></head>
<body>
    <nav th:replace="fragments/nav :: nav"></nav>
    <div th:if="${resolutionPopulaires.size()}==0 ">
        <h2>Vous possédez déjà toutes les résolutions de la plateforme</h2>
    </div>


    <div th:if="${resolutionPopulaires.size()}>0 ">
        <h2>Les résolutions populaires:</h2>
        <table class="resolutions">
            <thead>
                <tr>
                    <th>Action</th>
                    <th>Choisissez votre fréquence</th>
                    <th>S'abonner</th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="resolution : ${resolutionPopulaires}">
                    <td th:text="${resolution.action}">Action</td>
                    <td>
                        <form action="#" th:action="@{/addUserResolution}" th:object="${addUserResolutionForm}" method="post">
                            <input type="number" min="1" name="occurence" id="occurence" th:field="*{nb_occurences}">
                            <label>fois par</label>
                            <select id="frequence" th:field="*{frequence}">
                                <option value="JOUR">Jour</option>
                                <option value="SEMAINE">Semaine</option>
                                <option value="MOIS">Mois</option>
                                <option value="ANNEE">Année</option>
                            </select>
                    <td>
                        <input type="hidden" th:value="${resolution.idResolution}" name="idResolution">
                        <input type="hidden" th:value="${session.user.getIdUser()}" name="idUser">
                        <input type="submit" value="Prendre cette résolution">
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div th:if="${resolutionHasard.size()}>0 ">
        <h2>Les résolutions au hasard :</h2>
        <table class="resolutions">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Action</th>
                    <th>Choisissez votre fréquence</th>
                    <th>S'abonner</th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="resolution : ${resolutionHasard}">
                    <td th:text="${resolution.idResolution}">IdResolution</td>
                    <td th:text="${resolution.action}">Action</td>
                    <td>
                        <form action="#" th:action="@{/addUserResolution}" th:object="${addUserResolutionForm}" method="post">
                            <input type="number" min="1" name="occurence" id="occurence" th:field="*{nb_occurences}">
                            <label>fois par</label>
                            <select id="frequence" th:field="*{frequence}">
                                <option value="JOUR">Jour</option>
                                <option value="SEMAINE">Semaine</option>
                                <option value="MOIS">Mois</option>
                                <option value="ANNEE">Année</option>
                            </select>
                    <td>
                            <input type="hidden" th:value="${resolution.idResolution}" name="idResolution">
                            <input type="hidden" th:value="${session.user.getIdUser()}" name="idUser">
                            <input type="submit" value="Prendre cette résolution">
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Ajouter votre propre résolution :</h2>
    
    <form action="#" th:action="@{/addNewResolution}" th:object="${addResolutionForm}" method="post">
        <!-- recup Action/Frequence/NbOccurence -->
        <label for="action">Action :</label>
        <input type="text" id="action" name="action" th:field="*{action}">

        <label>Fréquence :</label>

        <input type="number" min="1" name="occurence" id="occurence" th:field="*{nb_occurences}">
        <label>fois par</label>
        <select id="frequence" th:field="*{frequence}">
            <option value="JOUR">Jour</option>
            <option value="SEMAINE">Semaine</option>
            <option value="MOIS">Mois</option>
            <option value="ANNEE">Année</option>
        </select>

        <input type="hidden" th:value="${session.user.getIdUser()}" name="idUser">
        <input type="submit" value="Ajouter cette nouvelle résolution">
    </form>

    <div th:replace="fragments/footer :: footer"></div>
</body>
</html>